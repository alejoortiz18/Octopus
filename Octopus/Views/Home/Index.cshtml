@using Models.Model.Usuario
@model UsuarioReferidoViewModel


<div>
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true" style="place-self: center;">
        <div class="container-fluid py-1 px-3">
            <nav aria-label="breadcrumb">
                <h6 class="font-weight-bolder mb-0 text-center fw-bold" style="font-size: 2rem;">MI RED ACTUAL</h6>
            </nav>
        </div>
    </nav>
</div>


<div class="container py-4">

    <!-- Nivel 0: tu usuario raíz -->
    <div class="nivel nivel-0">
        <div class="row justify-content-start g-4">
            @Html.Partial("_TarjetaUsuario", Model)
        </div>
    </div>

    <!-- Contenedor vacío donde se insertarán filas de referidos -->
    <div id="referidos-dinamicos"></div>

</div>

@section Scripts {
    <script>
        async function toggleReferidosDinamico(usuarioId, btn) {
          const root = document.getElementById("referidos-dinamicos");
          let bloque = document.getElementById(`referidos-generados-${usuarioId}`);

          // Si ya existe: lo quitamos
          if (bloque) {
            bloque.remove();
            btn.innerText = "VER REFERIDOS";
            return;
          }

          // Si no existe: creamos la fila y la insertamos
          bloque = document.createElement("div");
          bloque.id = `referidos-generados-${usuarioId}`;
          bloque.className = "row justify-content-start g-4 mt-3";

          const resp = await fetch(`/Home/GetReferidosPartial?usuarioId=${usuarioId}`);
          if (!resp.ok) return;
          bloque.innerHTML = await resp.text();

          root.appendChild(bloque);
          btn.innerText = "OCULTAR REFERIDOS";
        }
    </script>
}




<style>
.ps__rail-x {
    display: none !important;
}

body, html {
    overflow-x: hidden;
}

.contenedor-referidos {
    overflow-x: hidden;
}
</style>







